---
title: 'BA01.[The Short Shot] 数学解析'
date: '2025-12-20'
tags: ['bayesian', 'Beta Distribution', 'likelihood', 'Odds']
draft: false
summary: 'BA01.[The Short Shot] 数学解析'
images: ["/static/images/BA012.png"]
authors: ["default"]
---

 

前面的 [Short Shot] 故事不仅仅是一部单纯的小说。它就像一座建立在严密数学计算之上的城堡。我将公开教科书上学到的“传统贝叶斯定理”如何转换为现场使用的“发生比 (Odds) 和贝叶斯因子”的数学蓝图 (Blueprint)。

## 1. 教科书的方式 (The Probability View)

下面的方程式是我们在学校学到的贝叶斯定理的原型。核心是通过分母进行归一化 (Normalization)，使总概率之和始终为 1 (100%)。

此时，似然 P(D|H)——即假设 H 为真时观测到该数据的概率——由数据的性质决定。在前面看到的“Short Shot”场景中，在温度 (HT) 和压力 (HP) 这两个假设下，只存在“不良”或“良品”的结果。如果将其置换为 1 和 0，个别数据将遵循典型的伯努利分布 (Bernoulli Distribution)。

$$
P(H|D) = \frac{P(D|H) P(H)}{P(D)}
$$

- P(H|D) : 后验概率（看到数据后的信念、置信度、概率、概率分布）

- P(D|H) : 似然（假设正确时出现数据的概率）

- P(H) : 先验概率（原有的信念）

- P(D) : 证据的概率（综合所有假设的数据发生概率）


现场计算实务上的问题

这里计算分母 P(D) 很令人头疼。因为必须把所有假设的概率都加起来。

$$
P(D) = P(D|H_T)P(H_T) + P(D|H_P)P(H_P) \dots
$$

（假设一多，不仅计算量爆炸，而且在实战中大多不知道 P(D)）。

## 2. 故事中的方式：The Odds View

发生比 (Odds) 计算法是执行假设检验型贝叶斯推断的另一种强有力的方法。这种方式的核心是积极利用“主观概率 (Subjective Probability)”。

经营现场的管理者们各自拥有不同的直觉和经验信念。Odds 框架不是排除这种个人的主观性，而是将其转化为可以系统且一致地管理的工具。管理者将自己的初始信念数值化为 Odds，每当有新的证据（数据）进入时，都会反映这一点并持续更新概率。

通过这个反复的过程，管理者可以验证自己的直觉与实际数据的符合程度，并提高决策的质量。最重要的是，从技术角度来看，不需要计算必须考虑所有可能数据情况数的“令人头疼的分母 P(D)”，这是实务上的一大优势。

[面向管理者的 Odds 框架的价值]

- 主观的体系化：提供将每个管理者不同的直觉和信念（主观概率）作为一致的数值进行管理的框架。

- 动态决策：通过“设定信念 → 反映数据 → 更新信念”的反复循环，验证决策的一致性。

- 计算的效率性：通过使用 Odds 方式，去除必须计算总概率的复杂分母 P(D) 运算，支持快速决策。

$$
\text{Posterior Odds} = \text{Prior Odds} \times \text{Bayes Factor}
$$

- Odds (发生比/几率)：假设 A 比假设 B 有力几倍？（比率）

- Bayes Factor (贝叶斯因子)：数据支持假设 A 的程度是假设 B 的几倍？（力量的比率）

## 3. 完美的一一对应 (The Mapping)

来，现在让我们施展魔法。“复杂的概率公式”如何变身为“简单的 Odds 公式”？ 我们有两个假设：温度 (H
T
) 和压力 (H
P
)。下面整理一下各自的传统贝叶斯式。

式 A (关于温度是凶手的温度假设的式子)：

$$
P(H_T|D) = \frac{P(D|H_T) P(H_T)}{P(D)}
$$

式 B (关于压力是凶手的压力假设的式子)：

$$
P(H_P|D) = \frac{P(D|H_P) P(H_P)}{P(D)}
$$

现在试着用 [式 A] 除以 [式 B]。那么会发生惊人的事情。

$$
\frac{P(H_T|D)}{P(H_P|D)} = \frac{\frac{P(D|H_T) P(H_T)}{P(D)}}{\frac{P(D|H_P) P(H_P)}{P(D)}}
$$

分母和分子中同样存在的麻烦制造者 P(D) 被约分消失了！（砰！）

整理剩下的部分，就是我们在故事中用过的那个公式。

$$
\underbrace{\frac{P(H_T|D)}{P(H_P|D)}}_{\text{Posterior Odds}} = \underbrace{\frac{P(D|H_T)}{P(D|H_P)}}_{\text{Bayes Factor}} \times \underbrace{\frac{P(H_T)}{P(H_P)}}_{\text{Prior Odds}}
$$


核心要点

- 传统方式的后验概率比率 → Posterior Odds

- 传统方式的似然比率 → Bayes Factor

- 传统方式的先验概率比率 → Prior Odds

最终，Odds 方式不是新的数学，而是去除了复杂的归一化常数 P(D) 从而使计算效率化的贝叶斯定理的现场版本。

## 4. 代入实际数据 (验证)

让我们把故事中的“上午数据（50 个中有 5 个不良）”代入两种方式，看看是否会出现相同的结果。

#### A. 故事中的方式 (Odds & Bayes Factor)

- Prior Odds: 0.6 / 0.4 = 1.5

- Bayes Factor: 

$$
\approx \mathbf{4.7}
$$

 (计算值)

- Posterior Odds: 1.5 x 4.7 = 7.05

- 最终概率: 

$$
7.05 / (1+7.05) \approx \mathbf{87.6\%}
$$

#### B. 传统方式 (Probability)

- 似然计算 (伯努利分布，P=不良率，k=不良数量，n=样本数量)：

$$
P^k * (1-P)^{n-k}
$$

- 温度似然 $ P(D|H_T) $ : 

$$
(0.08)^5(0.92)^{45} \approx \text{非常小的数 A}
$$

- 压力似然 $ P(D|H_P) $ : 

$$
(0.04)^5(0.96)^{45} \approx \text{非常小的数 B}
$$

- *（这里 A 大约是 B 的 4.7 倍。请亲自计算看看）*

- 证据概率 P(D) 计算: 

$$
(A \times 0.6) + (B \times 0.4)
$$

- 后验概率 $ P(H_T|D) $: 

$$
\frac{A \times 0.6}{(A \times 0.6) + (B \times 0.4)}
$$

- 如果用计算器敲打这个复杂的式子？惊人的是，准确地得出了 

$$
\mathbf{87.6\%}
$$

。

## 结论 (Writer's Conclusion)

我们为什么使用 Odds 方式？

传统方式每次都要计算名为 P(D) 的总计，所以在数据持续进入的流式 (Streaming) 状况 (Loop) 下，计算会变慢。

相反，Odds 方式只需要继续进行单纯的乘法。

这就是现场工程师和 AI 热爱贝叶斯的原因，也是在故事中使用 Odds 方式的原因。
