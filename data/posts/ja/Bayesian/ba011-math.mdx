---
title: 'BA01.[The Short Shot] 数学解説'
date: '2025-12-20'
tags: ['Bayesian', 'likelihood', 'Odds']
draft: false
summary: 'BA01.[The Short Shot] 数学解説'
images: ["/static/images/BA012.png"]
authors: ["default"]
---

 

先ほどの[[Short Shot]](https://news.exavions.com/ja/ba01-bayesian-data-noir/)の話は、単なる小説ではない。徹底した数学的計算の上に築かれた城のようなものだ。教科書で学ぶ「伝統的なベイズの定理」が、現場で使われる「オッズとベイズ因子」へどのように変換されるのか、その数学的青写（Blueprint）を公開する。

## 1. 教科書の方式 (The Probability View)

下記の方程式が、私たちが学校で学ぶベイズの定理の原型だ。核心は、分母を通じて全体の確率の和が常に1（100%）になるように正規化（Normalization）するという点だ。

この時、尤度 P(D|H)――つまり、仮説Hが真である時に該当データが観測される確率――は、データの性格によってその分布が決まる。先ほどの「Short Shot」のシナリオの場合、温度（HT）と圧力（HP）という2つの仮説の下で、「不良」または「良品」という結果のみが存在する。これを1と0に置換すれば、個別データは典型的なベルヌーイ確率分布（Bernoulli Distribution）に従うことになる。

$  $
P(H|D) = \frac&#123;P(D|H) P(H)&#125;&#123;P(D)&#125;
$  $

- P(H|D) : 事後確率（データを見た後の信念、信頼度、確率、確率分布）

- P(D|H) : 尤度（仮説が正しい時にデータが出る確率）

- P(H) : 事前確率（既存の信念）

- P(D) : 証拠の確率（全ての仮説を統合したデータの発生確率）


現場の計算実務的な問題点

ここで分母であるP(D)を計算するのが厄介だ。全ての仮説の確率を全部足さなければならないからだ。

$  $
P(D) = P(D|H_T)P(H_T) + P(D|H_P)P(H_P) \dots
$  $

（仮説が多くなれば計算が爆発するだけでなく、実戦では分からない場合がほとんどだ）

.

## 2. 物語の中の方式：The Odds View

オッズ（Odds）計算法は、仮説検定型のベイズ推論を遂行するもう一つの強力なアプローチだ。この方式の核心は、「主観的確率（Subjective Probability）」を積極的に活用するという点にある。

経営現場の管理者たちは、それぞれ異なる直感と経験的信念を持っている。オッズフレームワークは、このような個人の主観を排除するのではなく、むしろこれを体系的かつ一貫性を持って管理できるツールへと転換してくれる。管理者は自身の初期信念をオッズとして数値化し、新しい証拠（データ）が入ってくるたびにこれを反映して確率を持続的にアップデートする。

この反復的な過程を通じて、管理者は自身の直感が実際のデータとどれほど合致するか検証し、意思決定の品質を高めていくことができる。何より技術的な観点から、発生可能な全てのデータの場合の数を考慮しなければならない「厄介な分母P(D)」を計算する必要がないという点は、実務的に大きな強みだ。

[経営者のためのオッズ（Odds）フレームワークの価値]

- 主観の体系化：管理者ごとに異なる直感と信念（主観的確率）を一貫した数値で管理するフレームワークを提供。

- 動的意思決定：「信念設定 → データ反映 → 信念更新」の反復ループを通じて意思決定の整合性を検証。

- 計算の効率性：オッズ方式を使用することで、全体の確率を計算しなければならない複雑な分母P(D)の演算を除去し、迅速な意思決定を支援。

$  $
\text&#123;Posterior Odds&#125; = \text&#123;Prior Odds&#125; \times \text&#123;Bayes Factor&#125;
$  $

- Odds（オッズ）：仮説Aが仮説Bより何倍有力か？（比率）

- Bayes Factor（ベイズ因子）：データが仮説Aを仮説Bより何倍強く支持するか？（力の比率）

.

## 3. 完璧な一対一対応 (The Mapping)

さあ、魔法をかけてみよう。どのようにして「複雑な確率公式」が「シンプルなオッズ公式」に変身するのか？ 私たちは2つの仮説、温度（H
T
）と圧力（H
P
）を持っている。以下にそれぞれの伝統的なベイズ式を整理してみる。

式A（温度が犯人であるという温度仮説に対する式）：

$  $
P(H_T|D) = \frac&#123;P(D|H_T) P(H_T)&#125;&#123;P(D)&#125;
$  $

式B（圧力が犯人であるという圧力仮説に対する式）：

$  $
P(H_P|D) = \frac&#123;P(D|H_P) P(H_P)&#125;&#123;P(D)&#125;
$  $

さて、[式A]を[式B]で割ってみる。すると驚くべきことが起こる。

$  $
\frac&#123;P(H_T|D)&#125;&#123;P(H_P|D)&#125; = \frac&#123;\frac&#123;P(D|H_T) P(H_T)&#125;&#123;P(D)&#125;&#125;&#123;\frac&#123;P(D|H_P) P(H_P)&#125;&#123;P(D)&#125;&#125;
$  $

分母と分子に同じく存在する厄介者のP(D)が約分されて消える！（ポン！）

残ったものを整理すれば、まさに私たちが物語で使ったその公式になる。

$  $
\underbrace&#123;\frac&#123;P(H_T|D)&#125;&#123;P(H_P|D)&#125;&#125;_&#123;\text&#123;Posterior Odds&#125;&#125; = \underbrace&#123;\frac&#123;P(D|H_T)&#125;&#123;P(D|H_P)&#125;&#125;_&#123;\text&#123;Bayes Factor&#125;&#125; \times \underbrace&#123;\frac&#123;P(H_T)&#125;&#123;P(H_P)&#125;&#125;_&#123;\text&#123;Prior Odds&#125;&#125;
$  $


核心ポイント

- 伝統的方式の事後確率比率 → Posterior Odds

- 伝統的方式の尤度比率 → Bayes Factor

- 伝統的方式の事前確率比率 → Prior Odds

結局、オッズ（Odds）方式は新しい数学ではなく、複雑な正規化定数P(D)を除去して計算を効率化したベイズの定理の現場バージョンだ。

.

## 4. 実際のデータ代入（検証）

物語の中の「午前のデータ（50個中5個不良）」を両方の方式に入れて、同じ結果が出るか確認してみよう。

#### A. 物語の中の方式 (Odds & Bayes Factor)

- Prior Odds: 0.6 / 0.4 = 1.5

- Bayes Factor: 

$  $
\approx \mathbf&#123;4.7&#125;
$  $

 (計算値)

- Posterior Odds: 1.5 x 4.7 = 7.05

- 最終確率: 

$  $
7.05 / (1+7.05) \approx \mathbf&#123;87.6\%&#125;
$  $

#### B. 伝統的な方式 (Probability)

- 尤度計算（ベルヌーイ分布、P=不良率、k=不良数量、n=サンプル数量）：

$  $
P^k * (1-P)^&#123;n-k&#125;
$  $

- 温度尤度 $ P(D|H_T) $ : 

$  $
(0.08)^5(0.92)^&#123;45&#125; \approx \text&#123;非常に小さい数 A&#125;
$  $

- 圧力尤度 $ P(D|H_P) $ : 

$  $
(0.04)^5(0.96)^&#123;45&#125; \approx \text&#123;非常に小さい数 B&#125;
$  $

- *（ここでAはBの約4.7倍だ。直接計算してみよ）*

- 証拠確率 P(D) 計算: 

$  $
(A \times 0.6) + (B \times 0.4)
$  $

- 事後確率 $ P(H_T|D) $: 

$  $
\frac&#123;A \times 0.6&#125;&#123;(A \times 0.6) + (B \times 0.4)&#125;
$  $

- この複雑な式を電卓で叩くと？ 驚くべきことに正確に 

$  $
\mathbf&#123;87.6\%&#125;
$  $

 が出る。

### 結論 (Writer's Conclusion)

私たちはなぜオッズ（Odds）方式を使うのか？

伝統的な方式は毎回P(D)という全体の合計を求めなければならず、データが入り続けるストリーミング状況（Loop）では計算が遅くなる。

一方、オッズ方式は単純な掛け算だけを続ければ良い。

これこそが現場のエンジニアとAIがベイズを愛する理由であり、物語の中でオッズ方式を使った理由である。
